$(document).ready(function(){$.urlParam=function(e){var a=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==a?null:decodeURI(a[1])||0};var e,a=1;$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>=$("footer").offset().top){var t=$(".engagement-ring-inner").attr("data-count");clearTimeout(e),e=setTimeout(function(){a++,!$(".loading-more").length&&24*a-24<t&&$('<div class="loading-more">Loading More...</div>').insertAfter("#engagement-ring"),24*a-24<t&&$.ajax({url:"engagement-ring",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:{metal:$.urlParam("metal"),color:$.urlParam("color"),brand:$.urlParam("brand"),category:$.urlParam("category"),shape:$.urlParam("shape"),sort:$.urlParam("sort"),video:$.urlParam("video"),page:a},beforeSend:function(){},success:function(e){$("#engagement-ring-container").append($(e)),$("#engagement-ring .ajax-img").on("load",function(){$(this).prev().fadeOut(0)}),$(".loading-more").remove()},error:function(e,a,t){console.log(e)}})},50)}}),$(".filter-name").click(function(){$(this).next().slideToggle(),$(".filter-dropdown-outer").not($(this).next()).slideUp()}),$(document).mouseup(function(e){$(event.target).hasClass("filter-name")||0===$(e.target).closest(".filter-dropdown-outer").length&&$(".filter-dropdown-outer").slideUp("fast")}),$(".phone-filter-container").click(function(){$(".filter-case-container").not($(this).next()).fadeOut(),$(this).next().fadeToggle("fast")}),$(".ajax-img").one("load",function(){$(this).prev().fadeOut(0)}).each(function(){this.complete&&($(this).load(),$(this).prev().fadeOut(0))}),$(document).on("click",".alt-m",function(e){e.preventDefault(),$(this).parent().prev().children(".ajax-img").attr("src",$(this).attr("data-img")),$(this).parent().next().children(".engagement-ring-text-title").text($(this).attr("data-name")),$(this).parent().next().children(".engagement-ring-text-price").text("$"+$(this).attr("data-price")),$(this).parents("a").attr("href",$(this).attr("data-link"))}),$("#"+$.urlParam("video")).css({background:"#d60d8c",color:"white"}),$("#"+$.urlParam("video")).parent("a").attr("param-value",""),$(".filter-dropdown > a[param-name], .filter-inner-dropdown > a[param-name]").each(function(){var e=new URL(window.location.href);if($(this).attr("param-value").includes("{}")){value=$(this).attr("param-value").split("{}"),names=$(this).attr("param-name").split("{}");for(var a=0;a<value.length;a++)e.searchParams.set(names[a],value[a])}else e.searchParams.set($(this).attr("param-name"),$(this).attr("param-value"));$(this).attr("href",e.toString())}),$('a[param-value="'+$.urlParam("sort")+'"] .sort-by-case').addClass("selected"),$('a[param-value="'+$.urlParam("metal")+"{}"+$.urlParam("color")+'"] .metal-case').addClass("selected")});
