$(document).ready(function(){function e(){n=1,$.ajax({url:"get-diamonds",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:{page:n,shape:$.urlParam("shape"),cut:$.urlParam("cut"),caratto:$(".carat--to").val(),caratfrom:$(".carat--from").val(),priceto:$(".price--to").val(),pricefrom:$(".price--from").val(),colorfrom:parseInt($(".color_slider .noUi-handle-lower").attr("aria-valuenow")),colorto:parseInt($(".color_slider .noUi-handle-upper").attr("aria-valuenow")),clarityfrom:parseInt($(".clarity_slider .noUi-handle-lower").attr("aria-valuenow")),clarityto:parseInt($(".clarity_slider .noUi-handle-upper").attr("aria-valuenow"))},beforeSend:function(){},success:function(e){console.log(e),$("#gemstone-container").empty().append($(e)),$("#gemstone-container .ajax-img").on("load",function(){$(this).prev().fadeOut(0)})},error:function(e,a,t){console.log(e)}})}$.urlParam=function(e){var a=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==a?null:decodeURI(a[1])||0};var a,t,n=1;$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>=$("footer").offset().top){var e=$(".gemstone-inner").attr("data-count");clearTimeout(a),a=setTimeout(function(){n++,!$(".loading-more").length&&24*n-24<e&&$('<div class="loading-more">Loading More...</div>').insertAfter("#gemstone"),24*n-24<e&&$.ajax({url:"get-diamonds",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:{page:n,shape:$.urlParam("shape"),cut:$.urlParam("cut"),caratto:$(".carat--to").val(),caratfrom:$(".carat--from").val(),priceto:$(".price--to").val(),pricefrom:$(".price--from").val(),colorfrom:parseInt($(".color_slider .noUi-handle-lower").attr("aria-valuenow")),colorto:parseInt($(".color_slider .noUi-handle-upper").attr("aria-valuenow")),clarityfrom:parseInt($(".clarity_slider .noUi-handle-lower").attr("aria-valuenow")),clarityto:parseInt($(".clarity_slider .noUi-handle-upper").attr("aria-valuenow"))},beforeSend:function(){},success:function(e){$("#gemstone-container").append($(e)),$("#gemstone-container .ajax-img").on("load",function(){$(this).prev().fadeOut(0)}),$(".loading-more").remove()},error:function(e,a,t){console.log(e)}})},50)}}),$(document).on("mouseenter",".gemstone-inner",function(){4==$(this).find("video").prop("readyState")&&($(this).find(".ajax-img").fadeOut(1),$(this).find("video").trigger("play"))}),$(document).on("mouseleave",".gemstone-inner",function(){$(this).find("video").trigger("pause")}),t=$.urlParam("shape"),$("#"+t).css({background:"#d60d8c",color:"white !important"}),$("#"+t).find("div,span").css({color:"white"}),$("#gemstone-container .ajax-img").on("load",function(){$(this).prev().fadeOut(0)}),$(".ajax-img").one("load",function(){$(this).prev().fadeOut(0)}).each(function(){this.complete&&($(this).load(),$(this).prev().fadeOut(0))});var r=document.getElementById("slider-step"),o=["N","M","L","K","J","I","H","G","F","E","D"];noUiSlider.create(r,{start:[0,10],connect:!0,step:1,range:{min:[0],max:[10]},pips:{mode:"values",values:[0,1,2,3,4,5,6,7,8,9,10],density:100}}),$(".noUi-value").each(function(e){$("#slider-step .noUi-value[data-value="+e+"]").text(o[parseInt(e)])});var i=document.getElementById("clarity"),l=["I3","I2","I1","SI3","SI2","SI1","VS2","VS1","VVS2","VVS1","IF"];noUiSlider.create(i,{start:[0,10],connect:!0,step:1,range:{min:[0],max:[10]},pips:{mode:"values",values:[0,1,2,3,4,5,6,7,8,9,10],density:100}}),$(".noUi-value").each(function(e){$("#clarity .noUi-value[data-value="+e+"]").text(l[parseInt(e)])});for(var c,u=document.querySelectorAll(".price__track"),s=document.querySelectorAll(".price--from"),d=document.querySelectorAll(".price--to"),m=[],f=0;f<u.length;f++)m.push([s[f],d[f]]);c=Math.round($("#price-case").find(".right-slider-input").val())+1,[].slice.call(u).forEach(function(a,t){function n(e,t){var n=[null,null];n[e]=t,a.noUiSlider.set(n)}noUiSlider.create(a,{start:[0,c],connect:!0,range:{min:0,max:c}}).on("update",function(e,a){m[t][a].value=e[a]}),a.noUiSlider.on("change",function(a,t){e()}),m[t].forEach(function(e,t){e.addEventListener("change",function(){n(t,this.value)}),e.addEventListener("keydown",function(e){var r,o=a.noUiSlider.get(),i=Number(o[t]),l=a.noUiSlider.steps()[t];switch(e.which){case 13:n(t,this.value);break;case 38:!1===(r=l[1])&&(r=1),null!==r&&n(t,i+r);break;case 40:!1===(r=l[0])&&(r=1),null!==r&&n(t,i-r)}})})});var p=document.querySelectorAll(".carat__track"),h=document.querySelectorAll(".carat--from"),v=document.querySelectorAll(".carat--to"),g=[];for(f=0;f<p.length;f++)g.push([h[f],v[f]]);!function(a){[].slice.call(p).forEach(function(t,n){function r(e,a){var n=[null,null];n[e]=a,t.noUiSlider.set(n)}noUiSlider.create(t,{start:[0,a],connect:!0,range:{min:0,max:a}}).on("update",function(e,a){g[n][a].value=e[a]}),t.noUiSlider.on("change",function(a,t){e()}),g[n].forEach(function(e,a){e.addEventListener("change",function(){r(a,this.value)}),e.addEventListener("keydown",function(e){var n,o=t.noUiSlider.get(),i=Number(o[a]),l=t.noUiSlider.steps()[a];switch(e.which){case 13:r(a,this.value);break;case 38:!1===(n=l[1])&&(n=1),null!==n&&r(a,i+n);break;case 40:!1===(n=l[0])&&(n=1),null!==n&&r(a,i-n)}})})})}(Math.round($("#carat-case").find(".right-slider-input").val())+1),r.noUiSlider.on("change",function(a,t){e()}),i.noUiSlider.on("change",function(a,t){e()}),$(".custom-range-slider__input").keyup(function(){e()}),$(".advance-filter").click(function(){$(".product-filter-dropdown").slideToggle()}),$("a[param-name]").each(function(){var e=new URL(window.location.href);if($(this).attr("param-value").includes("{}")){value=$(this).attr("param-value").split("{}"),names=$(this).attr("param-name").split("{}");for(var a=0;a<value.length;a++)e.searchParams.set(names[a],value[a])}else e.searchParams.set($(this).attr("param-name"),$(this).attr("param-value"));$(this).attr("href",e.toString())}),$('a[param-value="'+$.urlParam("cut")+'"] label').css({background:"#d60d8c",color:"white"})});